---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";

export async function getStaticPaths() {
  const recipes = await getCollection("recipes");

  return recipes.map((recipe) => {
    return {
      params: { recipe: recipe.slug },
      props: { recipe },
    };
  });
}

const { recipe } = Astro.props;
const { Content } = await recipe.render();

const title = recipe.data?.metadata?.title || recipe.slug;
---

<Layout title={title}>
  <div class="sticky top-0 p-4 bg-inherit shadow bg-gray-100">
    <h1 class="text-3xl font-semibold">{title}</h1>
  </div>

  <div class="whitespace-pre-wrap font-mono">
    {JSON.stringify(recipe)}
  </div>

  <div class="p-4 prose">
    <Content />
  </div>
</Layout>
